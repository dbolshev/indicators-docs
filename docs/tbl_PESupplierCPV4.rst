.. _tbl_PESupplierCPV4:

==================
tbl_PESupplierCPV4
==================

************************
Суть аналітичної таблиці
************************

Дана аналітична таблиця відображає дані замовника, постачальника та коди предметів закупівель з завершених процедур закупівель.

*************************
Форма аналітичної таблиці
*************************

Аналітична таблиця містить наступну інформацію:

- Замовник
- Предмет закупівлі
- Постачальник

Приклад того, як може виглядати аналітична таблиця:

========== ================= ==============
Замовник   Предмет закупівлі Постачальник
---------- ----------------- --------------
Замовник 1 Предмет 1         Постачальник 1
Замовник 1 Предмет 2         Постачальник 3
Замовник 1 Предмет 3         Постачальник 2
Замовник 2 Предмет 1         Постачальник 4
Замовник 2 Предмет 2         Постачальник 1
...        ...               ...
========== ================= ==============

******************************
Розрахунок аналітичної таблиці
******************************

Джерела даних для розрахунку
============================

Для розрахунку аналітичної таблиці вікористовуються наступні джерела даних:

- API модуля тендеринга електронної системи закупівель

- Транзакційна змінна :ref:`tv_subjectOfProcurement`

- Транзакційна змінна :ref:`tv_procuringEntity`

Частота розрахунку
==================

Аналітична таблиця розраховується раз на добу.

Поля для розрахунку
===================

Для розрахунку використовуються наступні поля з API модуля тендеринга:

- ``data.awards.suppliers.identifier.id``
- ``data.awards.suppliers.identifier.scheme``
- ``data.status``

Для розрахунку використовуються наступні транзакційні змінні:

- :ref:`tv_tenderCPVList`

- :ref:`tv_procuringEntity`

Формула розрахунку
==================

1. Вибираємо усі завершені процедури - усі процедури, що мають статус ``data.status = 'complete'``

2. Для кожної завершеної процедури вибираємо ідентифікатор замовника, ідентифкатори постачальників та код предмету закупівлі зі змінної :ref:`tv_subjectOfProcurement`.

3. Отримані дані (ідентифікатор замовника, ідентифікатор постачальника та код предмету закупівлі) заносимо до таблиці.

